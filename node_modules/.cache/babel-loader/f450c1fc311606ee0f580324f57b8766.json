{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/admin-pc/Desktop/vEngage/SHUBHAM/opterInterface_10th_jan_2021/shubham_operator_interface2021/src/Callhistory.js\";\nimport React, { Component } from \"react\";\nimport { withAuth0 } from \"@auth0/auth0-react\";\nimport Audio from \"./Audio/AudioFile/Audio\";\nimport LoaderThreeDot from \"./Loader/LoaderThreeDot\";\nimport CallHistoryOrderForm from \"./OrderDetails/Forms/CallHistoryOrderForm\";\n\nclass Callhistory extends Component {\n  constructor() {\n    super();\n\n    this.GetAuthToken = async () => {\n      const {\n        getAccessTokenSilently\n      } = this.props.auth0;\n      const token = await getAccessTokenSilently();\n      return token;\n    };\n\n    this.getConvdata = async (convid, centernm, callerid) => {\n      const token = await this.GetAuthToken();\n      console.log(\"this is my passed convid data\", convid);\n      console.log(\"this is my passed centerm data\", centernm);\n      console.log(\"this is my passed callerid data\", callerid);\n      document.getElementById(\"convdiv\").innerHTML = \"<img  id='convloader' width='550px' height='420px' src='/assets/images/messenger-icon.gif' />\"; // do stuff\n\n      fetch(process.env.REACT_APP_API_URL + \"/oi/api/v1/conversation/\" + convid, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n        return this.DisplayConvData(data, centernm, callerid, convid);\n      }).catch(err => {\n        console.log(err);\n        this.noConvData();\n      });\n    };\n\n    this.getEarlierDateBeforeToday = (todayDate, number) => {\n      var fromDate = todayDate;\n      let updatedEarlierDate = fromDate.setDate(fromDate.getDate() - number);\n      return updatedEarlierDate;\n    };\n\n    this.getCallerid = async (fromDate, toDate, callStatus, callerId) => {\n      const token = await this.GetAuthToken();\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      myHeaders.append(\"Accept\", \"application/json\");\n      myHeaders.append(\"Authorization\", `Bearer ${token}`);\n      var raw;\n\n      if (fromDate != \"\" && toDate != \"\") {\n        raw = JSON.stringify({\n          start_date: fromDate,\n          end_date: toDate\n        });\n      } else if (fromDate != \"\" && toDate != \"\" && callerId != \"\") {\n        raw = JSON.stringify({\n          start_date: fromDate,\n          end_date: toDate,\n          caller_id: callerId\n        });\n      } else if (callerId != \"\" && callStatus != \"\") {\n        raw = JSON.stringify({\n          status: callStatus,\n          caller_id: callerId\n        });\n      } else if (fromDate != \"\", toDate != \"\", callStatus != \"\") {\n        raw = JSON.stringify({\n          start_date: fromDate,\n          end_date: toDate,\n          status: callStatus\n        });\n      } else if (callerId != \"\") {\n        raw = JSON.stringify({\n          caller_id: callerId\n        });\n      } else if (callStatus != \"\") {\n        raw = JSON.stringify({\n          status: callStatus\n        });\n      } else {\n        raw = JSON.stringify({\n          start_date: fromDate,\n          end_date: toDate,\n          status: callStatus,\n          caller_id: callerId\n        });\n      }\n\n      var requestOptions = {\n        method: \"POST\",\n        headers: myHeaders,\n        body: raw,\n        redirect: \"follow\"\n      };\n      fetch(`${process.env.REACT_APP_API_URL}/oi/api/v1/all-calls`, requestOptions).then(response => response.json()).then(data => {\n        console.log(\"search DATA\", data);\n        this.setState({ ...this.state,\n          All_calls: data,\n          Loading: false\n        });\n      }).catch(error => console.log(\"error\", error));\n    };\n\n    this.dateToStringFunc = givenDate => {\n      var today = givenDate;\n      var dd = String(today.getDate()).padStart(2, \"0\");\n      var mm = String(today.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n\n      var yyyy = today.getFullYear();\n      today = yyyy + \"/\" + mm + \"/\" + dd;\n      return today;\n    };\n\n    this.getAllCallerid = async () => {\n      const token = await this.GetAuthToken();\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      myHeaders.append(\"Accept\", \"application/json\");\n      myHeaders.append(\"Authorization\", `Bearer ${token}`);\n      let toDateString = this.dateToStringFunc(new Date());\n      var fromDate = new Date();\n      fromDate.setDate(fromDate.getDate() - 3);\n      let fromDateString = this.dateToStringFunc(fromDate);\n      console.log(\"Today\", toDateString);\n      console.log(\"Earlier\", fromDateString);\n      var raw = JSON.stringify({\n        start_date: fromDateString,\n        end_date: toDateString,\n        status: \"\"\n      });\n      var requestOptions = {\n        method: \"POST\",\n        headers: myHeaders,\n        body: raw,\n        redirect: \"follow\"\n      };\n      fetch(`${process.env.REACT_APP_API_URL}/oi/api/v1/all-calls`, requestOptions).then(response => response.json()).then(data => {\n        this.setState({ ...this.state,\n          All_calls: data,\n          Loading: false\n        });\n      }).catch(error => console.log(\"error\", error));\n    };\n\n    this.InputHandler = e => {\n      this.setState({ ...this.state,\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.state = {\n      All_calls: [],\n      new_calls: [],\n      Loading: true,\n      endpoint: process.env.REACT_APP_WS_URL,\n      message: [],\n      convmsg: [],\n      conversationID: \"\",\n      fetchedOrder: {},\n      showAudio: false,\n      fromDate: \"\",\n      toDate: \"\",\n      Contact: \"\",\n      callStatus: \"\",\n      FilterCallRecord: \"\",\n      Search: false,\n      ResetCheck: \"false\"\n    };\n  }\n\n  DisplayOrderData(orderdata, convid) {\n    var orderObj = JSON.parse(orderdata);\n    var procedetail_data = JSON.stringify(orderObj[0][\"order_details\"][\"procedure\"]); //alert(orderdetail_data);\n\n    var i_proc = \"\";\n    var proce_div = '<div class=\"row mt-2\">';\n    var procedetail_jsonObj = JSON.parse(procedetail_data);\n\n    for (i_proc in procedetail_jsonObj) {\n      proce_div += '<div class=\"col-4\"><label  class=\"form-control\" style=\"font-size: 11px; height:auto;\">' + procedetail_jsonObj[i_proc][\"modality\"] + '</label></div><div class=\"col-6\"><label  class=\"form-control\" style=\"font-size: 11px; height:auto\">' + procedetail_jsonObj[i_proc][\"bodypart\"] + '</label></div><div class=\"col-2\"><a href=\"#\" data-toggle=\"modal\" data-target=\"#mribrain\"><i aria-hidden=\"true\" class=\"fa fa-calendar fa-2x\"></i></a></div>';\n    }\n\n    proce_div += \"</div>\";\n    document.getElementById(\"procedure_div\").innerHTML = proce_div;\n\n    if (appointemnt_dtm != null) {\n      var appointemnt_dtm = orderObj[0][\"order_details\"][\"appointment\"][0][\"schedule_datetime\"];\n      var appntdtm = new Date(appointemnt_dtm);\n      var options = {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\"\n      };\n      var appointemnt_str = appntdtm.toLocaleString(\"en-US\", options);\n    } else {\n      appointemnt_str = \"No Data Found\";\n    }\n\n    document.getElementById(\"appointdiv_dtm\").innerHTML = appointemnt_str;\n    var last_name = orderObj[0][\"order_details\"][\"patient\"][0][\"last_name\"];\n    var first_name = orderObj[0][\"order_details\"][\"patient\"][0][\"first_name\"];\n    var dob = orderObj[0][\"order_details\"][\"patient\"][0][\"DOB\"];\n    var medicareno = orderObj[0][\"order_details\"][\"patient\"][0][\"medicare_no\"];\n    var callstatus = orderObj[0][\"order_details\"][\"patient\"][0][\"status_updated_by_operator\"].replace(\"_\", \" \");\n    var feedback = orderObj[0][\"order_details\"][\"patient\"][0][\"feedback\"];\n    var order_dtl_div = '<div class=\"card\"><div class=\"card-body\"><div class=\"card-title\">Patient Details</div><div class=\"row\"><form class=\"wd-full\" style=\"width:100%\"><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">Last Name</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' + last_name + '</label></div></div><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">First Name</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' + first_name + '</label></div></div><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">DOB</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' + dob + '</label></div></div><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">Medicare No</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' + medicareno + '</label></div</div></div></div><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">Call Status</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' + callstatus + '</label></div</div></div></div><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">Feedback</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' + feedback + \"</label></div</div></div></div></form></div>\";\n    document.getElementById(\"patientdetail_div\").innerHTML = order_dtl_div;\n  }\n\n  noOrderData() {\n    var proce_div = '<div class=\"row mt-2\">';\n    proce_div += '<div class=\"col-4\"><p>No Data Found</p></div>';\n    proce_div += \"</div>\";\n    document.getElementById(\"procedure_div\").innerHTML = \"No Data Found\";\n    document.getElementById(\"appointdiv_dtm\").innerHTML = \"No Data Found\";\n    var order_dtl_div = '<div class=\"card\"><div class=\"card-body\"><div class=\"card-title\">Patient Details</div><p>No Data Found</p></div></div>';\n    document.getElementById(\"patientdetail_div\").innerHTML = order_dtl_div;\n  }\n\n  DisplayConvData(chatdetail_data, centernm, callerid, convid) {\n    console.log(chatdetail_data);\n    var x = \"<ul class='chat' style='width:100%'>\";\n\n    for (let i in chatdetail_data) {\n      var utterance = JSON.stringify(chatdetail_data[i].utterance).replace('\"', \"\").replace('\"', \"\");\n      var message_from = JSON.stringify(chatdetail_data[i].utterance_from);\n      var receiptdate = JSON.stringify(chatdetail_data[i].creation_date).replace('\"', \"\").replace('\"', \"\");\n      var msgdtm = new Date(receiptdate);\n      var options = {\n        year: \"numeric\",\n        month: \"short\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\",\n        second: \"numeric\"\n      };\n      var twelevehour_msgdtm = msgdtm.toLocaleString(\"en-US\", options);\n      var asr_corrected_text = JSON.stringify(chatdetail_data[i].asr_corrected_text).replace('\"', \"\").replace('\"', \"\"); // Get the size of an object\n\n      Object.size = function (obj) {\n        var size = 0,\n            key;\n\n        for (key in obj) {\n          if (obj.hasOwnProperty(key)) size++;\n        }\n\n        return size;\n      };\n\n      let nlu_intent = JSON.parse(chatdetail_data[i].nlu_data);\n      nlu_intent = Object.size(nlu_intent) !== 0 ? Object.keys(nlu_intent)[0] : \"\";\n      console.log(nlu_intent);\n\n      if (message_from == '\"BOT\"') {\n        if (asr_corrected_text != \"null\") {\n          x += '<li style=\"margin-bottom:0px;padding-left:15px;width:80%\" class=\"agent clearfix\" ><span class=\"chat-img left clearfix \"><img src=\"http://placehold.it/50/55C1E7/fff&text=A I\" alt=\"AI\" class=\"img-circle\"/></span><div class=\" clearfix gradient-blue  bot-body\">' + utterance + '</p><span class=\"glyphicon glyphicon-time span-text\">' + asr_corrected_text + \"</span><div></div>\" + '<span class=\" clearfix\"><small class=\"right text-muted\"><span class=\"glyphicon glyphicon-time\"></span>' + twelevehour_msgdtm + \"</small></span></div><p>\" + \"</li>\";\n        } else {\n          x += '<li style=\"margin-bottom:0px;padding-left:15px;width:80%\" class=\"agent clearfix\"><span class=\"chat-img left clearfix \"><img src=\"http://placehold.it/50/55C1E7/fff&text=A I\" alt=\"AI\" class=\"img-circle\"/></span><div class=\" clearfix gradient-blue  bot-body\">' + utterance + \"</p>\" + '<span class=\" clearfix\"><small class=\"left text-muted\"><span class=\"glyphicon glyphicon-time\">' + twelevehour_msgdtm + \"</span>\" + \"</small></span></div>\" + \"</li>\";\n        }\n      } else {\n        if (asr_corrected_text != \"null\") {\n          x += '<li class=\"admin clearfix\" style=\"width:80%\"><span class=\"chat-img right clearfix\"><img src=\"http://placehold.it/50/FA6F57/fff&text=U\" alt=\"U\" class=\"img-circle\"/></span><div class=\" clearfix bot-body2\">' + utterance + '</p><span class=\"glyphicon glyphicon-time spanuser-text\">' + asr_corrected_text + \"</span>\" + '<span class=\" clearfix\"><small class=\"left dt-text\"><span class=\"glyphicon glyphicon-time\"></span>' + twelevehour_msgdtm + \"&nbsp;&nbsp;</small></span></div><p>\" + \"<p id='intent_id'>\" + \"{ intent: '\" + nlu_intent + \"' }\" + \"</p>\" + \"</li>\";\n        } else {\n          x += '<li class=\"admin clearfix\" style=\"width:80%\"><span class=\"chat-img right clearfix\"><img src=\"http://placehold.it/50/FA6F57/fff&text=U\" alt=\"U\" class=\"img-circle\"/></span><div class=\" clearfix bot-body2\">' + utterance + \"</span>\" + '<span class=\" clearfix\"><small class=\"left dt-text\"><span class=\"glyphicon glyphicon-time\"></span>' + twelevehour_msgdtm + \"&nbsp;&nbsp;</small></span></div><p>\" + \"<p id='intent_id'>\" + \"{ intent: '\" + nlu_intent + \"' }\" + \"</p>\" + \"</li>\";\n        }\n      }\n    }\n\n    document.getElementById(\"convdiv\").innerHTML = x + \"</ul>\";\n    document.getElementById(\"callerid_chatdiv\").innerHTML = callerid; // updating conversation chatdiv line no. - 304 (sandeep)\n\n    document.getElementById(\"converseid_chatdiv\").innerHTML = convid;\n    document.getElementById(\"div_centernm\").innerHTML = centernm;\n    document.getElementById(\"conversionid_textbox\").value = convid;\n    this.setState({ ...this.state,\n      conversationID: convid,\n      showAudio: true\n    });\n  }\n\n  noConvData() {\n    var x = \"<ul class='chat'>\";\n    document.getElementById(\"convdiv\").innerHTML = \"No Convesation Data Found\" + \"</ul>\";\n  }\n\n  componentDidMount() {\n    this.getAllCallerid();\n  }\n\n  render() {\n    let src = `${process.env.REACT_APP_API_URL}/oi/api/twilio/audio/${this.state.conversationID}`;\n    console.log(\"from\", this.state.fromDate);\n    console.log(\"to\", this.state.toDate);\n    console.log(\"status\", this.state.callStatus);\n\n    const ResetHandler = () => {\n      this.setState({ ...this.state,\n        fromDate: \"\",\n        toDate: \"\",\n        callStatus: \"\",\n        FilterCallRecord: \"\",\n        Search: false,\n        Contact: \"\",\n        ResetCheck: \"true\"\n      });\n      this.getAllCallerid();\n    };\n\n    let showcallRecords = null;\n\n    if (this.state.Loading) {\n      showcallRecords = /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"text-center\",\n        style: {\n          marginTop: \"45vh\"\n        },\n        children: /*#__PURE__*/_jsxDEV(LoaderThreeDot, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this);\n    } else {\n      showcallRecords = /*#__PURE__*/_jsxDEV(\"ul\", {\n        class: \"nav nav-pills nav-pills-warning nav-stacked flex-column\",\n        style: {\n          flex: 1,\n          scrollSnapType: \"y mandatory\"\n        },\n        role: \"tablist\",\n        children: this.state.All_calls.map(k => /*#__PURE__*/_jsxDEV(\"li\", {\n          class: \"nav-item \",\n          style: {\n            scrollSnapAlign: \"start\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            onClick: () => this.getConvdata(k.conversation_id, k.center_name, k.caller_id),\n            class: \"nav-link \",\n            \"data-toggle\": \"pill\",\n            href: \"#\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              class: \"\",\n              style: {\n                fontSize: \"10px\",\n                color: \"white\",\n                textAlign: \"left\",\n                letterSpacing: \"1px\",\n                marginBottom: \"3px\",\n                lineHeight: \"1.2\",\n                color: \"black\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  style: {\n                    width: \"15%\",\n                    paddingTop: \"10px\",\n                    paddingTop: \"10px\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    id: \"newcall\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 485,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: {\n                    textAlign: \"left\",\n                    paddingLeft: \"10px\",\n                    paddingBottom: \"3px\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontWeight: \"800\",\n                      paddingBottom: \"2px\",\n                      paddingRight: \"5px\"\n                    },\n                    children: k.caller_id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 494,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 503,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      paddingBottom: \"2px\"\n                    },\n                    children: k.center_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 504,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 511,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: new Date(k.initiate_time).toLocaleString(\"en-US\", {\n                      year: \"numeric\",\n                      month: \"short\",\n                      day: \"numeric\",\n                      hour: \"numeric\",\n                      minute: \"numeric\",\n                      second: \"numeric\"\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 512,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"content-wrapper content-margin\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"border\",\n          style: {\n            backgroundColor: \"#DADCD4\",\n            paddingLeft: \"10px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"d-flex searchmenu mr-5 \",\n            style: {\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"search\",\n              style: {\n                marginRight: \"5px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  marginRight: \"5px\"\n                },\n                children: \"FROM\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 547,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                class: \"input rounded\",\n                style: {\n                  borderWidth: \"thin\",\n                  padding: \"2px 0 2px 0\"\n                },\n                name: \"fromDate\",\n                value: this.state.fromDate,\n                onChange: this.InputHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"search\",\n              style: {\n                marginRight: \"5px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  marginRight: \"5px\"\n                },\n                children: \"TO\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                class: \"input rounded\",\n                style: {\n                  borderWidth: \"thin\",\n                  padding: \"2px 0 2px 0\"\n                },\n                name: \"toDate\",\n                value: this.state.toDate,\n                onChange: this.InputHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 561,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"search\",\n              style: {\n                marginRight: \"5px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  marginRight: \"5px\"\n                },\n                children: \"Contact\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                class: \"input rounded\",\n                style: {\n                  borderWidth: \"thin\",\n                  padding: \"2px 0 2px 0\"\n                },\n                name: \"Contact\",\n                value: this.state.Contact,\n                onChange: this.InputHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"search\",\n              style: {\n                marginRight: \"5px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  marginRight: \"5px\"\n                },\n                children: \"CALL STATUS\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"callstatusselect\",\n                class: \"input rounded\",\n                style: {\n                  padding: \"3px 0 3px 0\",\n                  height: \"32.8px\"\n                },\n                value: this.state.callStatus,\n                name: \"callStatus\",\n                onChange: this.InputHandler,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 593,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"AI_SUCCESS\",\n                  children: \"AI Success\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 594,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"OPERATOR_SUCCESS\",\n                  children: \"Operator Success\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 595,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"CUSTOMER_NO_RESPONSE\",\n                  children: \"Customer No Response\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"CUSTOMER_DISCONNECTED\",\n                  children: \"Customer Disconnected\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 599,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"CUSTOMER_CALLBACK\",\n                  children: \"Customer Callback\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 602,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"PROCEDURE_QUERY\",\n                  children: \"Procedure Query\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 603,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"GENERAL_QUERY\",\n                  children: \"General Query\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"APPOINTMENT_CONFIRMATION\",\n                  children: \"Appointment Confirmation\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-success btn-round\",\n              style: {\n                marginRight: \"5px\",\n                padding: \"7px\"\n              },\n              onClick: () => this.getCallerid(this.state.fromDate, this.state.toDate, this.state.callStatus, this.state.Contact),\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-warning btn-round\",\n              style: {\n                marginRight: \"5px\",\n                padding: \"7px\",\n                paddingLeft: \"15px\",\n                paddingRight: \"15px\"\n              },\n              onClick: ResetHandler,\n              children: \"Reset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"content-wrapper content-margin\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"container-fluid\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"callrec\",\n                class: \"col-md-2 call_divscrl\",\n                style: {\n                  height: \"90vh\",\n                  padding: \"0px\" // display: \"flex\",\n                  // width: \"220px\",\n\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: showcallRecords\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 655,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                // class=\"col-md-7 tab-content\"\n                class: \"tab-content\",\n                style: {\n                  height: \"100vh\",\n                  // backgroundColor: \"yellow\",\n                  // flex: \"1\",\n                  marginRight: \"21.5px\",\n                  width: \"56.5vw\",\n                  marginRight: \"3px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"item-01\",\n                  class: \"container-fluid tab-pane active\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"card\",\n                    style: {\n                      flexDirection: \"column\",\n                      padding: \"0px 5px\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"row\",\n                      style: {\n                        height: \"5vh\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \"col-3 text-left\",\n                        id: \"callerid_chatdiv\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 685,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        id: \"div_centernm\",\n                        class: \"col-4 text-center\",\n                        style: {\n                          textTransform: \"capitalize\"\n                        },\n                        children: \"Conversation\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 689,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \"col-5 text-right\",\n                        style: {\n                          fontWeight: \"normal\",\n                          fontSize: \"x-small\",\n                          fontStyle: \"italic\"\n                        },\n                        id: \"converseid_chatdiv\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 696,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 679,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"row\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \"card-body chat-care chat-body scrollDisplay\",\n                        id: \"convdiv\",\n                        style: {\n                          flex: 1,\n                          height: \"79vh\"\n                        },\n                        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                          class: \"col-md-12 col-lg-12 text-center\",\n                          style: {\n                            marginTop: \"45vh\",\n                            color: \"grey\"\n                          },\n                          children: \"Please select a conversation\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 716,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 708,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 707,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"row\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \" text-center col-md-12 col-lg-12\",\n                        style: {\n                          height: \"6vh\"\n                        },\n                        children: this.state.showAudio && this.state.conversationID ? /*#__PURE__*/_jsxDEV(Audio, {\n                          src: src\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 733,\n                          columnNumber: 29\n                        }, this) : null\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 726,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 725,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 671,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 670,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 658,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                // class=\" col-md-3\"\n                style: {\n                  height: \"90vh\",\n                  width: \"25%\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-lg-12 col-md-12\",\n                  id: \"orderdetail_div\",\n                  children: /*#__PURE__*/_jsxDEV(CallHistoryOrderForm, {\n                    convid: this.state.conversationID,\n                    getTokenFunc: this.GetAuthToken,\n                    ResetCheck: this.state.ResetCheck,\n                    state: this.state,\n                    setState: this.setState()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 752,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 751,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 743,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"hidden\",\n            name: \"conversionid_textbox\",\n            id: \"conversionid_textbox\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 764,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withAuth0(Callhistory);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/admin-pc/Desktop/vEngage/SHUBHAM/opterInterface_10th_jan_2021/shubham_operator_interface2021/src/Callhistory.js"],"names":["React","Component","withAuth0","Audio","LoaderThreeDot","CallHistoryOrderForm","Callhistory","constructor","GetAuthToken","getAccessTokenSilently","props","auth0","token","getConvdata","convid","centernm","callerid","console","log","document","getElementById","innerHTML","fetch","process","env","REACT_APP_API_URL","headers","Authorization","then","response","json","data","DisplayConvData","catch","err","noConvData","getEarlierDateBeforeToday","todayDate","number","fromDate","updatedEarlierDate","setDate","getDate","getCallerid","toDate","callStatus","callerId","myHeaders","Headers","append","raw","JSON","stringify","start_date","end_date","caller_id","status","requestOptions","method","body","redirect","setState","state","All_calls","Loading","error","dateToStringFunc","givenDate","today","dd","String","padStart","mm","getMonth","yyyy","getFullYear","getAllCallerid","toDateString","Date","fromDateString","InputHandler","e","target","name","value","new_calls","endpoint","REACT_APP_WS_URL","message","convmsg","conversationID","fetchedOrder","showAudio","Contact","FilterCallRecord","Search","ResetCheck","DisplayOrderData","orderdata","orderObj","parse","procedetail_data","i_proc","proce_div","procedetail_jsonObj","appointemnt_dtm","appntdtm","options","year","month","day","hour","minute","appointemnt_str","toLocaleString","last_name","first_name","dob","medicareno","callstatus","replace","feedback","order_dtl_div","noOrderData","chatdetail_data","x","i","utterance","message_from","utterance_from","receiptdate","creation_date","msgdtm","second","twelevehour_msgdtm","asr_corrected_text","Object","size","obj","key","hasOwnProperty","nlu_intent","nlu_data","keys","componentDidMount","render","src","ResetHandler","showcallRecords","marginTop","flex","scrollSnapType","map","k","scrollSnapAlign","conversation_id","center_name","fontSize","color","textAlign","letterSpacing","marginBottom","lineHeight","width","paddingTop","paddingLeft","paddingBottom","fontWeight","paddingRight","initiate_time","backgroundColor","alignItems","marginRight","borderWidth","padding","height","flexDirection","textTransform","fontStyle"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,oBAAP,MAAiC,2CAAjC;;AAEA,MAAMC,WAAN,SAA0BL,SAA1B,CAAoC;AAClCM,EAAAA,WAAW,GAAG;AACZ;;AADY,SAsBdC,YAtBc,GAsBC,YAAY;AACzB,YAAM;AAAEC,QAAAA;AAAF,UAA6B,KAAKC,KAAL,CAAWC,KAA9C;AACA,YAAMC,KAAK,GAAG,MAAMH,sBAAsB,EAA1C;AACA,aAAOG,KAAP;AACD,KA1Ba;;AAAA,SA4BdC,WA5Bc,GA4BA,OAAOC,MAAP,EAAeC,QAAf,EAAyBC,QAAzB,KAAsC;AAClD,YAAMJ,KAAK,GAAG,MAAM,KAAKJ,YAAL,EAApB;AAEAS,MAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CJ,MAA7C;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA8CH,QAA9C;AAEAE,MAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CF,QAA/C;AAEAG,MAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,SAAnC,GACE,+FADF,CARkD,CAUlD;;AAEAC,MAAAA,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgC,0BAAhC,GAA6DX,MAA9D,EAAsE;AACzEY,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASf,KAAM;AADxB;AADgE,OAAtE,CAAL,CAKGgB,IALH,CAKSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EALtB,EAMGF,IANH,CAMSG,IAAD,IAAU;AACdd,QAAAA,OAAO,CAACC,GAAR,CAAYa,IAAZ;AACA,eAAO,KAAKC,eAAL,CAAqBD,IAArB,EAA2BhB,QAA3B,EAAqCC,QAArC,EAA+CF,MAA/C,CAAP;AACD,OATH,EAUGmB,KAVH,CAUUC,GAAD,IAAS;AACdjB,QAAAA,OAAO,CAACC,GAAR,CAAYgB,GAAZ;AACA,aAAKC,UAAL;AACD,OAbH;AAcD,KAtDa;;AAAA,SAqQdC,yBArQc,GAqQc,CAACC,SAAD,EAAYC,MAAZ,KAAuB;AACjD,UAAIC,QAAQ,GAAGF,SAAf;AACA,UAAIG,kBAAkB,GAAGD,QAAQ,CAACE,OAAT,CAAiBF,QAAQ,CAACG,OAAT,KAAqBJ,MAAtC,CAAzB;AACA,aAAOE,kBAAP;AACD,KAzQa;;AAAA,SA2QdG,WA3Qc,GA2QA,OAAOJ,QAAP,EAAiBK,MAAjB,EAAyBC,UAAzB,EAAqCC,QAArC,KAAkD;AAC9D,YAAMlC,KAAK,GAAG,MAAM,KAAKJ,YAAL,EAApB;AACA,UAAIuC,SAAS,GAAG,IAAIC,OAAJ,EAAhB;AACAD,MAAAA,SAAS,CAACE,MAAV,CAAiB,cAAjB,EAAiC,kBAAjC;AACAF,MAAAA,SAAS,CAACE,MAAV,CAAiB,QAAjB,EAA2B,kBAA3B;AACAF,MAAAA,SAAS,CAACE,MAAV,CAAiB,eAAjB,EAAmC,UAASrC,KAAM,EAAlD;AAEA,UAAIsC,GAAJ;;AACA,UAAIX,QAAQ,IAAI,EAAZ,IAAkBK,MAAM,IAAI,EAAhC,EAAoC;AAClCM,QAAAA,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,UAAU,EAAEd,QADO;AAEnBe,UAAAA,QAAQ,EAAEV;AAFS,SAAf,CAAN;AAID,OALD,MAKO,IAAIL,QAAQ,IAAI,EAAZ,IAAkBK,MAAM,IAAI,EAA5B,IAAkCE,QAAQ,IAAI,EAAlD,EAAsD;AAC3DI,QAAAA,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,UAAU,EAAEd,QADO;AAEnBe,UAAAA,QAAQ,EAAEV,MAFS;AAGnBW,UAAAA,SAAS,EAAET;AAHQ,SAAf,CAAN;AAKD,OANM,MAMA,IAAIA,QAAQ,IAAI,EAAZ,IAAkBD,UAAU,IAAI,EAApC,EAAwC;AAC7CK,QAAAA,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AACnBI,UAAAA,MAAM,EAAEX,UADW;AAEnBU,UAAAA,SAAS,EAAET;AAFQ,SAAf,CAAN;AAID,OALM,MAKA,IAAKP,QAAQ,IAAI,EAAZ,EAAgBK,MAAM,IAAI,EAA1B,EAA8BC,UAAU,IAAI,EAAjD,EAAsD;AAC3DK,QAAAA,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,UAAU,EAAEd,QADO;AAEnBe,UAAAA,QAAQ,EAAEV,MAFS;AAGnBY,UAAAA,MAAM,EAAEX;AAHW,SAAf,CAAN;AAKD,OANM,MAMA,IAAIC,QAAQ,IAAI,EAAhB,EAAoB;AACzBI,QAAAA,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AACnBG,UAAAA,SAAS,EAAET;AADQ,SAAf,CAAN;AAGD,OAJM,MAIA,IAAID,UAAU,IAAI,EAAlB,EAAsB;AAC3BK,QAAAA,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AACnBI,UAAAA,MAAM,EAAEX;AADW,SAAf,CAAN;AAGD,OAJM,MAIA;AACLK,QAAAA,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,UAAU,EAAEd,QADO;AAEnBe,UAAAA,QAAQ,EAAEV,MAFS;AAGnBY,UAAAA,MAAM,EAAEX,UAHW;AAInBU,UAAAA,SAAS,EAAET;AAJQ,SAAf,CAAN;AAMD;;AAED,UAAIW,cAAc,GAAG;AACnBC,QAAAA,MAAM,EAAE,MADW;AAGnBhC,QAAAA,OAAO,EAAEqB,SAHU;AAInBY,QAAAA,IAAI,EAAET,GAJa;AAKnBU,QAAAA,QAAQ,EAAE;AALS,OAArB;AAQAtC,MAAAA,KAAK,CACF,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,sBAD9B,EAEHgC,cAFG,CAAL,CAIG7B,IAJH,CAISC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAJtB,EAKGF,IALH,CAKSG,IAAD,IAAU;AACdd,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2Ba,IAA3B;AACA,aAAK8B,QAAL,CAAc,EACZ,GAAG,KAAKC,KADI;AAEZC,UAAAA,SAAS,EAAEhC,IAFC;AAGZiC,UAAAA,OAAO,EAAE;AAHG,SAAd;AAKD,OAZH,EAaG/B,KAbH,CAaUgC,KAAD,IAAWhD,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB+C,KAArB,CAbpB;AAcD,KAhVa;;AAAA,SAkVdC,gBAlVc,GAkVMC,SAAD,IAAe;AAChC,UAAIC,KAAK,GAAGD,SAAZ;AACA,UAAIE,EAAE,GAAGC,MAAM,CAACF,KAAK,CAAC1B,OAAN,EAAD,CAAN,CAAwB6B,QAAxB,CAAiC,CAAjC,EAAoC,GAApC,CAAT;AACA,UAAIC,EAAE,GAAGF,MAAM,CAACF,KAAK,CAACK,QAAN,KAAmB,CAApB,CAAN,CAA6BF,QAA7B,CAAsC,CAAtC,EAAyC,GAAzC,CAAT,CAHgC,CAGwB;;AACxD,UAAIG,IAAI,GAAGN,KAAK,CAACO,WAAN,EAAX;AAEAP,MAAAA,KAAK,GAAGM,IAAI,GAAG,GAAP,GAAaF,EAAb,GAAkB,GAAlB,GAAwBH,EAAhC;AACA,aAAOD,KAAP;AACD,KA1Va;;AAAA,SA4VdQ,cA5Vc,GA4VG,YAAY;AAC3B,YAAMhE,KAAK,GAAG,MAAM,KAAKJ,YAAL,EAApB;AAEA,UAAIuC,SAAS,GAAG,IAAIC,OAAJ,EAAhB;AACAD,MAAAA,SAAS,CAACE,MAAV,CAAiB,cAAjB,EAAiC,kBAAjC;AACAF,MAAAA,SAAS,CAACE,MAAV,CAAiB,QAAjB,EAA2B,kBAA3B;AACAF,MAAAA,SAAS,CAACE,MAAV,CAAiB,eAAjB,EAAmC,UAASrC,KAAM,EAAlD;AAEA,UAAIiE,YAAY,GAAG,KAAKX,gBAAL,CAAsB,IAAIY,IAAJ,EAAtB,CAAnB;AACA,UAAIvC,QAAQ,GAAG,IAAIuC,IAAJ,EAAf;AACAvC,MAAAA,QAAQ,CAACE,OAAT,CAAiBF,QAAQ,CAACG,OAAT,KAAqB,CAAtC;AAEA,UAAIqC,cAAc,GAAG,KAAKb,gBAAL,CAAsB3B,QAAtB,CAArB;AACAtB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB2D,YAArB;AACA5D,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuB6D,cAAvB;AACA,UAAI7B,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AACvBC,QAAAA,UAAU,EAAE0B,cADW;AAEvBzB,QAAAA,QAAQ,EAAEuB,YAFa;AAGvBrB,QAAAA,MAAM,EAAE;AAHe,OAAf,CAAV;AAMA,UAAIC,cAAc,GAAG;AACnBC,QAAAA,MAAM,EAAE,MADW;AAEnBhC,QAAAA,OAAO,EAAEqB,SAFU;AAGnBY,QAAAA,IAAI,EAAET,GAHa;AAInBU,QAAAA,QAAQ,EAAE;AAJS,OAArB;AAOAtC,MAAAA,KAAK,CACF,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,sBAD9B,EAEHgC,cAFG,CAAL,CAIG7B,IAJH,CAISC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAJtB,EAKGF,IALH,CAKSG,IAAD,IAAU;AACd,aAAK8B,QAAL,CAAc,EACZ,GAAG,KAAKC,KADI;AAEZC,UAAAA,SAAS,EAAEhC,IAFC;AAGZiC,UAAAA,OAAO,EAAE;AAHG,SAAd;AAKD,OAXH,EAYG/B,KAZH,CAYUgC,KAAD,IAAWhD,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB+C,KAArB,CAZpB;AAaD,KArYa;;AAAA,SA2Yde,YA3Yc,GA2YEC,CAAD,IAAO;AACpB,WAAKpB,QAAL,CAAc,EACZ,GAAG,KAAKC,KADI;AAEZ,SAACmB,CAAC,CAACC,MAAF,CAASC,IAAV,GAAiBF,CAAC,CAACC,MAAF,CAASE;AAFd,OAAd;AAID,KAhZa;;AAEZ,SAAKtB,KAAL,GAAa;AACXC,MAAAA,SAAS,EAAE,EADA;AAEXsB,MAAAA,SAAS,EAAE,EAFA;AAGXrB,MAAAA,OAAO,EAAE,IAHE;AAIXsB,MAAAA,QAAQ,EAAE/D,OAAO,CAACC,GAAR,CAAY+D,gBAJX;AAKXC,MAAAA,OAAO,EAAE,EALE;AAMXC,MAAAA,OAAO,EAAE,EANE;AAOXC,MAAAA,cAAc,EAAE,EAPL;AAQXC,MAAAA,YAAY,EAAE,EARH;AASXC,MAAAA,SAAS,EAAE,KATA;AAUXrD,MAAAA,QAAQ,EAAE,EAVC;AAWXK,MAAAA,MAAM,EAAE,EAXG;AAYXiD,MAAAA,OAAO,EAAE,EAZE;AAaXhD,MAAAA,UAAU,EAAE,EAbD;AAcXiD,MAAAA,gBAAgB,EAAE,EAdP;AAeXC,MAAAA,MAAM,EAAE,KAfG;AAgBXC,MAAAA,UAAU,EAAE;AAhBD,KAAb;AAkBD;;AAoCDC,EAAAA,gBAAgB,CAACC,SAAD,EAAYpF,MAAZ,EAAoB;AAClC,QAAIqF,QAAQ,GAAGhD,IAAI,CAACiD,KAAL,CAAWF,SAAX,CAAf;AAEA,QAAIG,gBAAgB,GAAGlD,IAAI,CAACC,SAAL,CACrB+C,QAAQ,CAAC,CAAD,CAAR,CAAY,eAAZ,EAA6B,WAA7B,CADqB,CAAvB,CAHkC,CAMlC;;AACA,QAAIG,MAAM,GAAG,EAAb;AACA,QAAIC,SAAS,GAAG,wBAAhB;AAEA,QAAIC,mBAAmB,GAAGrD,IAAI,CAACiD,KAAL,CAAWC,gBAAX,CAA1B;;AACA,SAAKC,MAAL,IAAeE,mBAAf,EAAoC;AAClCD,MAAAA,SAAS,IACP,2FACAC,mBAAmB,CAACF,MAAD,CAAnB,CAA4B,UAA5B,CADA,GAEA,qGAFA,GAGAE,mBAAmB,CAACF,MAAD,CAAnB,CAA4B,UAA5B,CAHA,GAIA,4JALF;AAMD;;AACDC,IAAAA,SAAS,IAAI,QAAb;AACApF,IAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,SAAzC,GAAqDkF,SAArD;;AAEA,QAAIE,eAAe,IAAI,IAAvB,EAA6B;AAC3B,UAAIA,eAAe,GACjBN,QAAQ,CAAC,CAAD,CAAR,CAAY,eAAZ,EAA6B,aAA7B,EAA4C,CAA5C,EAA+C,mBAA/C,CADF;AAEA,UAAIO,QAAQ,GAAG,IAAI5B,IAAJ,CAAS2B,eAAT,CAAf;AACA,UAAIE,OAAO,GAAG;AACZC,QAAAA,IAAI,EAAE,SADM;AAEZC,QAAAA,KAAK,EAAE,MAFK;AAGZC,QAAAA,GAAG,EAAE,SAHO;AAIZC,QAAAA,IAAI,EAAE,SAJM;AAKZC,QAAAA,MAAM,EAAE;AALI,OAAd;AAOA,UAAIC,eAAe,GAAGP,QAAQ,CAACQ,cAAT,CAAwB,OAAxB,EAAiCP,OAAjC,CAAtB;AACD,KAZD,MAYO;AACLM,MAAAA,eAAe,GAAG,eAAlB;AACD;;AAED9F,IAAAA,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,SAA1C,GAAsD4F,eAAtD;AAEA,QAAIE,SAAS,GAAGhB,QAAQ,CAAC,CAAD,CAAR,CAAY,eAAZ,EAA6B,SAA7B,EAAwC,CAAxC,EAA2C,WAA3C,CAAhB;AACA,QAAIiB,UAAU,GAAGjB,QAAQ,CAAC,CAAD,CAAR,CAAY,eAAZ,EAA6B,SAA7B,EAAwC,CAAxC,EAA2C,YAA3C,CAAjB;AACA,QAAIkB,GAAG,GAAGlB,QAAQ,CAAC,CAAD,CAAR,CAAY,eAAZ,EAA6B,SAA7B,EAAwC,CAAxC,EAA2C,KAA3C,CAAV;AACA,QAAImB,UAAU,GAAGnB,QAAQ,CAAC,CAAD,CAAR,CAAY,eAAZ,EAA6B,SAA7B,EAAwC,CAAxC,EAA2C,aAA3C,CAAjB;AACA,QAAIoB,UAAU,GAAGpB,QAAQ,CAAC,CAAD,CAAR,CAAY,eAAZ,EAA6B,SAA7B,EAAwC,CAAxC,EACf,4BADe,EAEfqB,OAFe,CAEP,GAFO,EAEF,GAFE,CAAjB;AAGA,QAAIC,QAAQ,GAAGtB,QAAQ,CAAC,CAAD,CAAR,CAAY,eAAZ,EAA6B,SAA7B,EAAwC,CAAxC,EAA2C,UAA3C,CAAf;AAEA,QAAIuB,aAAa,GACf,+UACAP,SADA,GAEA,iNAFA,GAGAC,UAHA,GAIA,0MAJA,GAKAC,GALA,GAMA,kNANA,GAOAC,UAPA,GAQA,6NARA,GASAC,UATA,GAUA,0NAVA,GAWAE,QAXA,GAYA,8CAbF;AAeAtG,IAAAA,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,EAA6CC,SAA7C,GAAyDqG,aAAzD;AACD;;AAEDC,EAAAA,WAAW,GAAG;AACZ,QAAIpB,SAAS,GAAG,wBAAhB;AACAA,IAAAA,SAAS,IAAI,+CAAb;AAEAA,IAAAA,SAAS,IAAI,QAAb;AACApF,IAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,SAAzC,GAAqD,eAArD;AACAF,IAAAA,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,SAA1C,GAAsD,eAAtD;AAEA,QAAIqG,aAAa,GACf,wHADF;AAGAvG,IAAAA,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,EAA6CC,SAA7C,GAAyDqG,aAAzD;AACD;;AAED1F,EAAAA,eAAe,CAAC4F,eAAD,EAAkB7G,QAAlB,EAA4BC,QAA5B,EAAsCF,MAAtC,EAA8C;AAC3DG,IAAAA,OAAO,CAACC,GAAR,CAAY0G,eAAZ;AACA,QAAIC,CAAC,GAAG,sCAAR;;AAEA,SAAK,IAAIC,CAAT,IAAcF,eAAd,EAA+B;AAC7B,UAAIG,SAAS,GAAG5E,IAAI,CAACC,SAAL,CAAewE,eAAe,CAACE,CAAD,CAAf,CAAmBC,SAAlC,EACbP,OADa,CACL,GADK,EACA,EADA,EAEbA,OAFa,CAEL,GAFK,EAEA,EAFA,CAAhB;AAGA,UAAIQ,YAAY,GAAG7E,IAAI,CAACC,SAAL,CAAewE,eAAe,CAACE,CAAD,CAAf,CAAmBG,cAAlC,CAAnB;AACA,UAAIC,WAAW,GAAG/E,IAAI,CAACC,SAAL,CAAewE,eAAe,CAACE,CAAD,CAAf,CAAmBK,aAAlC,EACfX,OADe,CACP,GADO,EACF,EADE,EAEfA,OAFe,CAEP,GAFO,EAEF,EAFE,CAAlB;AAGA,UAAIY,MAAM,GAAG,IAAItD,IAAJ,CAASoD,WAAT,CAAb;AACA,UAAIvB,OAAO,GAAG;AACZC,QAAAA,IAAI,EAAE,SADM;AAEZC,QAAAA,KAAK,EAAE,OAFK;AAGZC,QAAAA,GAAG,EAAE,SAHO;AAIZC,QAAAA,IAAI,EAAE,SAJM;AAKZC,QAAAA,MAAM,EAAE,SALI;AAMZqB,QAAAA,MAAM,EAAE;AANI,OAAd;AAQA,UAAIC,kBAAkB,GAAGF,MAAM,CAAClB,cAAP,CAAsB,OAAtB,EAA+BP,OAA/B,CAAzB;AACA,UAAI4B,kBAAkB,GAAGpF,IAAI,CAACC,SAAL,CACvBwE,eAAe,CAACE,CAAD,CAAf,CAAmBS,kBADI,EAGtBf,OAHsB,CAGd,GAHc,EAGT,EAHS,EAItBA,OAJsB,CAId,GAJc,EAIT,EAJS,CAAzB,CAlB6B,CAuB7B;;AACAgB,MAAAA,MAAM,CAACC,IAAP,GAAc,UAAUC,GAAV,EAAe;AAC3B,YAAID,IAAI,GAAG,CAAX;AAAA,YACEE,GADF;;AAEA,aAAKA,GAAL,IAAYD,GAAZ,EAAiB;AACf,cAAIA,GAAG,CAACE,cAAJ,CAAmBD,GAAnB,CAAJ,EAA6BF,IAAI;AAClC;;AACD,eAAOA,IAAP;AACD,OAPD;;AASA,UAAII,UAAU,GAAG1F,IAAI,CAACiD,KAAL,CAAWwB,eAAe,CAACE,CAAD,CAAf,CAAmBgB,QAA9B,CAAjB;AACAD,MAAAA,UAAU,GACRL,MAAM,CAACC,IAAP,CAAYI,UAAZ,MAA4B,CAA5B,GAAgCL,MAAM,CAACO,IAAP,CAAYF,UAAZ,EAAwB,CAAxB,CAAhC,GAA6D,EAD/D;AAEA5H,MAAAA,OAAO,CAACC,GAAR,CAAY2H,UAAZ;;AAEA,UAAIb,YAAY,IAAI,OAApB,EAA6B;AAC3B,YAAIO,kBAAkB,IAAI,MAA1B,EAAkC;AAChCV,UAAAA,CAAC,IACC,sQACAE,SADA,GAEA,uDAFA,GAGAQ,kBAHA,GAIA,oBAJA,GAKA,wGALA,GAMAD,kBANA,GAOA,0BAPA,GAQA,OATF;AAUD,SAXD,MAWO;AACLT,UAAAA,CAAC,IACC,qQACAE,SADA,GAEA,MAFA,GAGA,gGAHA,GAIAO,kBAJA,GAKA,SALA,GAMA,uBANA,GAOA,OARF;AASD;AACF,OAvBD,MAuBO;AACL,YAAIC,kBAAkB,IAAI,MAA1B,EAAkC;AAChCV,UAAAA,CAAC,IACC,gNACAE,SADA,GAEA,2DAFA,GAGAQ,kBAHA,GAIA,SAJA,GAKA,oGALA,GAMAD,kBANA,GAOA,sCAPA,GAQA,oBARA,GASA,aATA,GAUAO,UAVA,GAWA,KAXA,GAYA,MAZA,GAaA,OAdF;AAeD,SAhBD,MAgBO;AACLhB,UAAAA,CAAC,IACC,gNACAE,SADA,GAEA,SAFA,GAGA,oGAHA,GAIAO,kBAJA,GAKA,sCALA,GAMA,oBANA,GAOA,aAPA,GAQAO,UARA,GASA,KATA,GAUA,MAVA,GAWA,OAZF;AAaD;AACF;AACF;;AAED1H,IAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,SAAnC,GAA+CwG,CAAC,GAAG,OAAnD;AACA1G,IAAAA,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,SAA5C,GAAwDL,QAAxD,CArG2D,CAuG3D;;AACAG,IAAAA,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,EAA8CC,SAA9C,GAA0DP,MAA1D;AAEAK,IAAAA,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,SAAxC,GAAoDN,QAApD;AAEAI,IAAAA,QAAQ,CAACC,cAAT,CAAwB,sBAAxB,EAAgDgE,KAAhD,GAAwDtE,MAAxD;AAEA,SAAK+C,QAAL,CAAc,EACZ,GAAG,KAAKC,KADI;AAEZ4B,MAAAA,cAAc,EAAE5E,MAFJ;AAGZ8E,MAAAA,SAAS,EAAE;AAHC,KAAd;AAKD;;AAEDzD,EAAAA,UAAU,GAAG;AACX,QAAI0F,CAAC,GAAG,mBAAR;AAEA1G,IAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,SAAnC,GACE,8BAA8B,OADhC;AAED;;AAoID2H,EAAAA,iBAAiB,GAAG;AAClB,SAAKpE,cAAL;AACD;;AASDqE,EAAAA,MAAM,GAAG;AACP,QAAIC,GAAG,GAAI,GAAE3H,OAAO,CAACC,GAAR,CAAYC,iBAAkB,wBAAuB,KAAKqC,KAAL,CAAW4B,cAAe,EAA5F;AAEAzE,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoB,KAAK4C,KAAL,CAAWvB,QAA/B;AACAtB,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkB,KAAK4C,KAAL,CAAWlB,MAA7B;AACA3B,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsB,KAAK4C,KAAL,CAAWjB,UAAjC;;AAEA,UAAMsG,YAAY,GAAG,MAAM;AACzB,WAAKtF,QAAL,CAAc,EACZ,GAAG,KAAKC,KADI;AAEZvB,QAAAA,QAAQ,EAAE,EAFE;AAGZK,QAAAA,MAAM,EAAE,EAHI;AAIZC,QAAAA,UAAU,EAAE,EAJA;AAKZiD,QAAAA,gBAAgB,EAAE,EALN;AAMZC,QAAAA,MAAM,EAAE,KANI;AAOZF,QAAAA,OAAO,EAAE,EAPG;AAQZG,QAAAA,UAAU,EAAE;AARA,OAAd;AAUA,WAAKpB,cAAL;AACD,KAZD;;AAcA,QAAIwE,eAAe,GAAG,IAAtB;;AAEA,QAAI,KAAKtF,KAAL,CAAWE,OAAf,EAAwB;AACtBoF,MAAAA,eAAe,gBACb;AACE,QAAA,KAAK,EAAC,aADR;AAEE,QAAA,KAAK,EAAE;AACLC,UAAAA,SAAS,EAAE;AADN,SAFT;AAAA,+BAME,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,cADF;AAUD,KAXD,MAWO;AACLD,MAAAA,eAAe,gBACb;AACE,QAAA,KAAK,EAAC,yDADR;AAEE,QAAA,KAAK,EAAE;AAAEE,UAAAA,IAAI,EAAE,CAAR;AAAWC,UAAAA,cAAc,EAAE;AAA3B,SAFT;AAGE,QAAA,IAAI,EAAC,SAHP;AAAA,kBAKG,KAAKzF,KAAL,CAAWC,SAAX,CAAqByF,GAArB,CAA0BC,CAAD,iBACxB;AAAI,UAAA,KAAK,EAAC,WAAV;AAAsB,UAAA,KAAK,EAAE;AAAEC,YAAAA,eAAe,EAAE;AAAnB,WAA7B;AAAA,iCACE;AACE,YAAA,OAAO,EAAE,MACP,KAAK7I,WAAL,CACE4I,CAAC,CAACE,eADJ,EAEEF,CAAC,CAACG,WAFJ,EAGEH,CAAC,CAAClG,SAHJ,CAFJ;AAQE,YAAA,KAAK,EAAC,WARR;AASE,2BAAY,MATd;AAUE,YAAA,IAAI,EAAC,GAVP;AAAA,mCAYE;AACE,cAAA,KAAK,EAAC,EADR;AAEE,cAAA,KAAK,EAAE;AACLsG,gBAAAA,QAAQ,EAAE,MADL;AAELC,gBAAAA,KAAK,EAAE,OAFF;AAGLC,gBAAAA,SAAS,EAAE,MAHN;AAILC,gBAAAA,aAAa,EAAE,KAJV;AAKLC,gBAAAA,YAAY,EAAE,KALT;AAMLC,gBAAAA,UAAU,EAAE,KANP;AAOLJ,gBAAAA,KAAK,EAAE;AAPF,eAFT;AAAA,qCAYE;AAAA,wCACE;AACE,kBAAA,KAAK,EAAE;AACLK,oBAAAA,KAAK,EAAE,KADF;AAELC,oBAAAA,UAAU,EAAE,MAFP;AAGLA,oBAAAA,UAAU,EAAE;AAHP,mBADT;AAAA,yCAOE;AAAM,oBAAA,EAAE,EAAC;AAAT;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,wBADF,eAUE;AACE,kBAAA,KAAK,EAAE;AACLL,oBAAAA,SAAS,EAAE,MADN;AAELM,oBAAAA,WAAW,EAAE,MAFR;AAGLC,oBAAAA,aAAa,EAAE;AAHV,mBADT;AAAA,0CAOE;AACE,oBAAA,KAAK,EAAE;AACLC,sBAAAA,UAAU,EAAE,KADP;AAELD,sBAAAA,aAAa,EAAE,KAFV;AAGLE,sBAAAA,YAAY,EAAE;AAHT,qBADT;AAAA,8BAOGf,CAAC,CAAClG;AAPL;AAAA;AAAA;AAAA;AAAA,0BAPF,eAgBE;AAAA;AAAA;AAAA;AAAA,0BAhBF,eAiBE;AACE,oBAAA,KAAK,EAAE;AACL+G,sBAAAA,aAAa,EAAE;AADV,qBADT;AAAA,8BAKGb,CAAC,CAACG;AALL;AAAA;AAAA;AAAA;AAAA,0BAjBF,eAwBE;AAAA;AAAA;AAAA;AAAA,0BAxBF,eAyBE;AAAA,8BACG,IAAI9E,IAAJ,CAAS2E,CAAC,CAACgB,aAAX,EAA0BvD,cAA1B,CAAyC,OAAzC,EAAkD;AACjDN,sBAAAA,IAAI,EAAE,SAD2C;AAEjDC,sBAAAA,KAAK,EAAE,OAF0C;AAGjDC,sBAAAA,GAAG,EAAE,SAH4C;AAIjDC,sBAAAA,IAAI,EAAE,SAJ2C;AAKjDC,sBAAAA,MAAM,EAAE,SALyC;AAMjDqB,sBAAAA,MAAM,EAAE;AANyC,qBAAlD;AADH;AAAA;AAAA;AAAA;AAAA,0BAzBF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AAZF;AAAA;AAAA;AAAA;AAAA;AAZF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADD;AALH;AAAA;AAAA;AAAA;AAAA,cADF;AAqFD;;AAED,wBACE;AAAK,MAAA,KAAK,EAAC,gCAAX;AAAA,6BACE;AAAK,QAAA,KAAK,EAAC,iBAAX;AAAA,gCAIE;AACE,UAAA,KAAK,EAAC,QADR;AAEE,UAAA,KAAK,EAAE;AAAEqC,YAAAA,eAAe,EAAE,SAAnB;AAA8BL,YAAAA,WAAW,EAAE;AAA3C,WAFT;AAAA,iCAIE;AACE,YAAA,KAAK,EAAC,yBADR;AAEE,YAAA,KAAK,EAAE;AAAEM,cAAAA,UAAU,EAAE;AAAd,aAFT;AAAA,oCAIE;AAAK,cAAA,KAAK,EAAC,QAAX;AAAoB,cAAA,KAAK,EAAE;AAAEC,gBAAAA,WAAW,EAAE;AAAf,eAA3B;AAAA,sCACE;AAAO,gBAAA,KAAK,EAAE;AAAEA,kBAAAA,WAAW,EAAE;AAAf,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAGE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,KAAK,EAAC,eAFR;AAGE,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,WAAW,EAAE,MAAf;AAAuBC,kBAAAA,OAAO,EAAE;AAAhC,iBAHT;AAIE,gBAAA,IAAI,EAAC,UAJP;AAKE,gBAAA,KAAK,EAAE,KAAKhH,KAAL,CAAWvB,QALpB;AAME,gBAAA,QAAQ,EAAE,KAAKyC;AANjB;AAAA;AAAA;AAAA;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF,eAgBE;AAAK,cAAA,KAAK,EAAC,QAAX;AAAoB,cAAA,KAAK,EAAE;AAAE4F,gBAAAA,WAAW,EAAE;AAAf,eAA3B;AAAA,sCACE;AAAO,gBAAA,KAAK,EAAE;AAAEA,kBAAAA,WAAW,EAAE;AAAf,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAGE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,KAAK,EAAC,eAFR;AAGE,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,WAAW,EAAE,MAAf;AAAuBC,kBAAAA,OAAO,EAAE;AAAhC,iBAHT;AAIE,gBAAA,IAAI,EAAC,QAJP;AAKE,gBAAA,KAAK,EAAE,KAAKhH,KAAL,CAAWlB,MALpB;AAME,gBAAA,QAAQ,EAAE,KAAKoC;AANjB;AAAA;AAAA;AAAA;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAhBF,eA4BE;AAAK,cAAA,KAAK,EAAC,QAAX;AAAoB,cAAA,KAAK,EAAE;AAAE4F,gBAAAA,WAAW,EAAE;AAAf,eAA3B;AAAA,sCACE;AAAO,gBAAA,KAAK,EAAE;AAAEA,kBAAAA,WAAW,EAAE;AAAf,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAGE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,KAAK,EAAC,eAFR;AAGE,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,WAAW,EAAE,MAAf;AAAuBC,kBAAAA,OAAO,EAAE;AAAhC,iBAHT;AAIE,gBAAA,IAAI,EAAC,SAJP;AAKE,gBAAA,KAAK,EAAE,KAAKhH,KAAL,CAAW+B,OALpB;AAME,gBAAA,QAAQ,EAAE,KAAKb;AANjB;AAAA;AAAA;AAAA;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,oBA5BF,eAwCE;AAAK,cAAA,KAAK,EAAC,QAAX;AAAoB,cAAA,KAAK,EAAE;AAAE4F,gBAAAA,WAAW,EAAE;AAAf,eAA3B;AAAA,sCACE;AAAO,gBAAA,KAAK,EAAE;AAAEA,kBAAAA,WAAW,EAAE;AAAf,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAGE;AACE,gBAAA,EAAE,EAAC,kBADL;AAEE,gBAAA,KAAK,EAAC,eAFR;AAGE,gBAAA,KAAK,EAAE;AAAEE,kBAAAA,OAAO,EAAE,aAAX;AAA0BC,kBAAAA,MAAM,EAAE;AAAlC,iBAHT;AAIE,gBAAA,KAAK,EAAE,KAAKjH,KAAL,CAAWjB,UAJpB;AAKE,gBAAA,IAAI,EAAC,YALP;AAME,gBAAA,QAAQ,EAAE,KAAKmC,YANjB;AAAA,wCAQE;AAAQ,kBAAA,KAAK,EAAC,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBARF,eASE;AAAQ,kBAAA,KAAK,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBATF,eAUE;AAAQ,kBAAA,KAAK,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVF,eAWE;AAAQ,kBAAA,KAAK,EAAC,sBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAXF,eAcE;AAAQ,kBAAA,KAAK,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAdF,eAiBE;AAAQ,kBAAA,KAAK,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAjBF,eAkBE;AAAQ,kBAAA,KAAK,EAAC,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAlBF,eAmBE;AAAQ,kBAAA,KAAK,EAAC,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAnBF,eAoBE;AAAQ,kBAAA,KAAK,EAAC,0BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBApBF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAxCF,eAoEE;AACE,cAAA,KAAK,EAAC,2BADR;AAEE,cAAA,KAAK,EAAE;AAAE4F,gBAAAA,WAAW,EAAE,KAAf;AAAsBE,gBAAAA,OAAO,EAAE;AAA/B,eAFT;AAGE,cAAA,OAAO,EAAE,MACP,KAAKnI,WAAL,CACE,KAAKmB,KAAL,CAAWvB,QADb,EAEE,KAAKuB,KAAL,CAAWlB,MAFb,EAGE,KAAKkB,KAAL,CAAWjB,UAHb,EAIE,KAAKiB,KAAL,CAAW+B,OAJb,CAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBApEF,eAmFE;AACE,cAAA,KAAK,EAAC,2BADR;AAEE,cAAA,KAAK,EAAE;AACL+E,gBAAAA,WAAW,EAAE,KADR;AAELE,gBAAAA,OAAO,EAAE,KAFJ;AAGLT,gBAAAA,WAAW,EAAE,MAHR;AAILG,gBAAAA,YAAY,EAAE;AAJT,eAFT;AAQE,cAAA,OAAO,EAAErB,YARX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAnFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,gBAJF,eA4GE;AAAK,UAAA,KAAK,EAAC,gCAAX;AAAA,kCACE;AAAK,YAAA,KAAK,EAAC,iBAAX;AAAA,mCACE;AAAK,cAAA,KAAK,EAAC,KAAX;AAAA,sCACE;AACE,gBAAA,EAAE,EAAC,SADL;AAEE,gBAAA,KAAK,EAAC,uBAFR;AAGE,gBAAA,KAAK,EAAE;AACL4B,kBAAAA,MAAM,EAAE,MADH;AAELD,kBAAAA,OAAO,EAAE,KAFJ,CAGL;AACA;;AAJK,iBAHT;AAAA,uCAUE;AAAA,4BAAM1B;AAAN;AAAA;AAAA;AAAA;AAAA;AAVF;AAAA;AAAA;AAAA;AAAA,sBADF,eAcE;AACE;AACA,gBAAA,KAAK,EAAC,aAFR;AAGE,gBAAA,KAAK,EAAE;AACL2B,kBAAAA,MAAM,EAAE,OADH;AAEL;AACA;AACAH,kBAAAA,WAAW,EAAE,QAJR;AAKLT,kBAAAA,KAAK,EAAE,QALF;AAMLS,kBAAAA,WAAW,EAAE;AANR,iBAHT;AAAA,uCAYE;AAAK,kBAAA,EAAE,EAAC,SAAR;AAAkB,kBAAA,KAAK,EAAC,iCAAxB;AAAA,yCACE;AACE,oBAAA,KAAK,EAAC,MADR;AAEE,oBAAA,KAAK,EAAE;AACLI,sBAAAA,aAAa,EAAE,QADV;AAELF,sBAAAA,OAAO,EAAE;AAFJ,qBAFT;AAAA,4CAQE;AACE,sBAAA,KAAK,EAAC,KADR;AAEE,sBAAA,KAAK,EAAE;AACLC,wBAAAA,MAAM,EAAE;AADH,uBAFT;AAAA,8CAME;AACE,wBAAA,KAAK,EAAC,iBADR;AAEE,wBAAA,EAAE,EAAC;AAFL;AAAA;AAAA;AAAA;AAAA,8BANF,eAUE;AACE,wBAAA,EAAE,EAAC,cADL;AAEE,wBAAA,KAAK,EAAC,mBAFR;AAGE,wBAAA,KAAK,EAAE;AAAEE,0BAAAA,aAAa,EAAE;AAAjB,yBAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAVF,eAiBE;AACE,wBAAA,KAAK,EAAC,kBADR;AAEE,wBAAA,KAAK,EAAE;AACLV,0BAAAA,UAAU,EAAE,QADP;AAELV,0BAAAA,QAAQ,EAAE,SAFL;AAGLqB,0BAAAA,SAAS,EAAE;AAHN,yBAFT;AAOE,wBAAA,EAAE,EAAC;AAPL;AAAA;AAAA;AAAA;AAAA,8BAjBF;AAAA;AAAA;AAAA;AAAA;AAAA,4BARF,eAoCE;AAAK,sBAAA,KAAK,EAAC,KAAX;AAAA,6CACE;AACE,wBAAA,KAAK,EAAC,6CADR;AAEE,wBAAA,EAAE,EAAC,SAFL;AAGE,wBAAA,KAAK,EAAE;AACL5B,0BAAAA,IAAI,EAAE,CADD;AAELyB,0BAAAA,MAAM,EAAE;AAFH,yBAHT;AAAA,+CAQE;AACE,0BAAA,KAAK,EAAC,iCADR;AAEE,0BAAA,KAAK,EAAE;AAAE1B,4BAAAA,SAAS,EAAE,MAAb;AAAqBS,4BAAAA,KAAK,EAAE;AAA5B,2BAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BApCF,eAsDE;AAAK,sBAAA,KAAK,EAAC,KAAX;AAAA,6CACE;AACE,wBAAA,KAAK,EAAC,kCADR;AAEE,wBAAA,KAAK,EAAE;AACLiB,0BAAAA,MAAM,EAAE;AADH,yBAFT;AAAA,kCAMG,KAAKjH,KAAL,CAAW8B,SAAX,IAAwB,KAAK9B,KAAL,CAAW4B,cAAnC,gBACC,QAAC,KAAD;AAAO,0BAAA,GAAG,EAAEwD;AAAZ;AAAA;AAAA;AAAA;AAAA,gCADD,GAEG;AARN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BAtDF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAZF;AAAA;AAAA;AAAA;AAAA,sBAdF,eAmGE;AACE;AACA,gBAAA,KAAK,EAAE;AACL6B,kBAAAA,MAAM,EAAE,MADH;AAGLZ,kBAAAA,KAAK,EAAE;AAHF,iBAFT;AAAA,uCAQE;AAAK,kBAAA,KAAK,EAAC,qBAAX;AAAiC,kBAAA,EAAE,EAAC,iBAApC;AAAA,yCACE,QAAC,oBAAD;AACE,oBAAA,MAAM,EAAE,KAAKrG,KAAL,CAAW4B,cADrB;AAEE,oBAAA,YAAY,EAAE,KAAKlF,YAFrB;AAGE,oBAAA,UAAU,EAAE,KAAKsD,KAAL,CAAWkC,UAHzB;AAIE,oBAAA,KAAK,EAAE,KAAKlC,KAJd;AAKE,oBAAA,QAAQ,EAAE,KAAKD,QAAL;AALZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA,sBAnGF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eA0HE;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,IAAI,EAAC,sBAFP;AAGE,YAAA,EAAE,EAAC;AAHL;AAAA;AAAA;AAAA;AAAA,kBA1HF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA5GF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAiPD;;AA9vBiC;;AAiwBpC,oBAAe3D,SAAS,CAACI,WAAD,CAAxB","sourcesContent":["import React, { Component } from \"react\";\nimport { withAuth0 } from \"@auth0/auth0-react\";\nimport Audio from \"./Audio/AudioFile/Audio\";\nimport LoaderThreeDot from \"./Loader/LoaderThreeDot\";\nimport CallHistoryOrderForm from \"./OrderDetails/Forms/CallHistoryOrderForm\";\n\nclass Callhistory extends Component {\n  constructor() {\n    super();\n    this.state = {\n      All_calls: [],\n      new_calls: [],\n      Loading: true,\n      endpoint: process.env.REACT_APP_WS_URL,\n      message: [],\n      convmsg: [],\n      conversationID: \"\",\n      fetchedOrder: {},\n      showAudio: false,\n      fromDate: \"\",\n      toDate: \"\",\n      Contact: \"\",\n      callStatus: \"\",\n      FilterCallRecord: \"\",\n      Search: false,\n      ResetCheck: \"false\",\n    };\n  }\n\n  GetAuthToken = async () => {\n    const { getAccessTokenSilently } = this.props.auth0;\n    const token = await getAccessTokenSilently();\n    return token;\n  };\n\n  getConvdata = async (convid, centernm, callerid) => {\n    const token = await this.GetAuthToken();\n\n    console.log(\"this is my passed convid data\", convid);\n    console.log(\"this is my passed centerm data\", centernm);\n\n    console.log(\"this is my passed callerid data\", callerid);\n\n    document.getElementById(\"convdiv\").innerHTML =\n      \"<img  id='convloader' width='550px' height='420px' src='/assets/images/messenger-icon.gif' />\";\n    // do stuff\n\n    fetch(process.env.REACT_APP_API_URL + \"/oi/api/v1/conversation/\" + convid, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(data);\n        return this.DisplayConvData(data, centernm, callerid, convid);\n      })\n      .catch((err) => {\n        console.log(err);\n        this.noConvData();\n      });\n  };\n\n  DisplayOrderData(orderdata, convid) {\n    var orderObj = JSON.parse(orderdata);\n\n    var procedetail_data = JSON.stringify(\n      orderObj[0][\"order_details\"][\"procedure\"]\n    );\n    //alert(orderdetail_data);\n    var i_proc = \"\";\n    var proce_div = '<div class=\"row mt-2\">';\n\n    var procedetail_jsonObj = JSON.parse(procedetail_data);\n    for (i_proc in procedetail_jsonObj) {\n      proce_div +=\n        '<div class=\"col-4\"><label  class=\"form-control\" style=\"font-size: 11px; height:auto;\">' +\n        procedetail_jsonObj[i_proc][\"modality\"] +\n        '</label></div><div class=\"col-6\"><label  class=\"form-control\" style=\"font-size: 11px; height:auto\">' +\n        procedetail_jsonObj[i_proc][\"bodypart\"] +\n        '</label></div><div class=\"col-2\"><a href=\"#\" data-toggle=\"modal\" data-target=\"#mribrain\"><i aria-hidden=\"true\" class=\"fa fa-calendar fa-2x\"></i></a></div>';\n    }\n    proce_div += \"</div>\";\n    document.getElementById(\"procedure_div\").innerHTML = proce_div;\n\n    if (appointemnt_dtm != null) {\n      var appointemnt_dtm =\n        orderObj[0][\"order_details\"][\"appointment\"][0][\"schedule_datetime\"];\n      var appntdtm = new Date(appointemnt_dtm);\n      var options = {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\",\n      };\n      var appointemnt_str = appntdtm.toLocaleString(\"en-US\", options);\n    } else {\n      appointemnt_str = \"No Data Found\";\n    }\n\n    document.getElementById(\"appointdiv_dtm\").innerHTML = appointemnt_str;\n\n    var last_name = orderObj[0][\"order_details\"][\"patient\"][0][\"last_name\"];\n    var first_name = orderObj[0][\"order_details\"][\"patient\"][0][\"first_name\"];\n    var dob = orderObj[0][\"order_details\"][\"patient\"][0][\"DOB\"];\n    var medicareno = orderObj[0][\"order_details\"][\"patient\"][0][\"medicare_no\"];\n    var callstatus = orderObj[0][\"order_details\"][\"patient\"][0][\n      \"status_updated_by_operator\"\n    ].replace(\"_\", \" \");\n    var feedback = orderObj[0][\"order_details\"][\"patient\"][0][\"feedback\"];\n\n    var order_dtl_div =\n      '<div class=\"card\"><div class=\"card-body\"><div class=\"card-title\">Patient Details</div><div class=\"row\"><form class=\"wd-full\" style=\"width:100%\"><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">Last Name</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' +\n      last_name +\n      '</label></div></div><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">First Name</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' +\n      first_name +\n      '</label></div></div><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">DOB</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' +\n      dob +\n      '</label></div></div><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">Medicare No</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' +\n      medicareno +\n      '</label></div</div></div></div><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">Call Status</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' +\n      callstatus +\n      '</label></div</div></div></div><div class=\"form-group row\"><label class=\"col-md-5 col-form-label\">Feedback</label><div class=\"col-md-7\"><label  class=\"form-control\" style=\"width: 100%; font-size: 11px;height:auto;\" >' +\n      feedback +\n      \"</label></div</div></div></div></form></div>\";\n\n    document.getElementById(\"patientdetail_div\").innerHTML = order_dtl_div;\n  }\n\n  noOrderData() {\n    var proce_div = '<div class=\"row mt-2\">';\n    proce_div += '<div class=\"col-4\"><p>No Data Found</p></div>';\n\n    proce_div += \"</div>\";\n    document.getElementById(\"procedure_div\").innerHTML = \"No Data Found\";\n    document.getElementById(\"appointdiv_dtm\").innerHTML = \"No Data Found\";\n\n    var order_dtl_div =\n      '<div class=\"card\"><div class=\"card-body\"><div class=\"card-title\">Patient Details</div><p>No Data Found</p></div></div>';\n\n    document.getElementById(\"patientdetail_div\").innerHTML = order_dtl_div;\n  }\n\n  DisplayConvData(chatdetail_data, centernm, callerid, convid) {\n    console.log(chatdetail_data);\n    var x = \"<ul class='chat' style='width:100%'>\";\n\n    for (let i in chatdetail_data) {\n      var utterance = JSON.stringify(chatdetail_data[i].utterance)\n        .replace('\"', \"\")\n        .replace('\"', \"\");\n      var message_from = JSON.stringify(chatdetail_data[i].utterance_from);\n      var receiptdate = JSON.stringify(chatdetail_data[i].creation_date)\n        .replace('\"', \"\")\n        .replace('\"', \"\");\n      var msgdtm = new Date(receiptdate);\n      var options = {\n        year: \"numeric\",\n        month: \"short\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\",\n        second: \"numeric\",\n      };\n      var twelevehour_msgdtm = msgdtm.toLocaleString(\"en-US\", options);\n      var asr_corrected_text = JSON.stringify(\n        chatdetail_data[i].asr_corrected_text\n      )\n        .replace('\"', \"\")\n        .replace('\"', \"\");\n      // Get the size of an object\n      Object.size = function (obj) {\n        var size = 0,\n          key;\n        for (key in obj) {\n          if (obj.hasOwnProperty(key)) size++;\n        }\n        return size;\n      };\n\n      let nlu_intent = JSON.parse(chatdetail_data[i].nlu_data);\n      nlu_intent =\n        Object.size(nlu_intent) !== 0 ? Object.keys(nlu_intent)[0] : \"\";\n      console.log(nlu_intent);\n\n      if (message_from == '\"BOT\"') {\n        if (asr_corrected_text != \"null\") {\n          x +=\n            '<li style=\"margin-bottom:0px;padding-left:15px;width:80%\" class=\"agent clearfix\" ><span class=\"chat-img left clearfix \"><img src=\"http://placehold.it/50/55C1E7/fff&text=A I\" alt=\"AI\" class=\"img-circle\"/></span><div class=\" clearfix gradient-blue  bot-body\">' +\n            utterance +\n            '</p><span class=\"glyphicon glyphicon-time span-text\">' +\n            asr_corrected_text +\n            \"</span><div></div>\" +\n            '<span class=\" clearfix\"><small class=\"right text-muted\"><span class=\"glyphicon glyphicon-time\"></span>' +\n            twelevehour_msgdtm +\n            \"</small></span></div><p>\" +\n            \"</li>\";\n        } else {\n          x +=\n            '<li style=\"margin-bottom:0px;padding-left:15px;width:80%\" class=\"agent clearfix\"><span class=\"chat-img left clearfix \"><img src=\"http://placehold.it/50/55C1E7/fff&text=A I\" alt=\"AI\" class=\"img-circle\"/></span><div class=\" clearfix gradient-blue  bot-body\">' +\n            utterance +\n            \"</p>\" +\n            '<span class=\" clearfix\"><small class=\"left text-muted\"><span class=\"glyphicon glyphicon-time\">' +\n            twelevehour_msgdtm +\n            \"</span>\" +\n            \"</small></span></div>\" +\n            \"</li>\";\n        }\n      } else {\n        if (asr_corrected_text != \"null\") {\n          x +=\n            '<li class=\"admin clearfix\" style=\"width:80%\"><span class=\"chat-img right clearfix\"><img src=\"http://placehold.it/50/FA6F57/fff&text=U\" alt=\"U\" class=\"img-circle\"/></span><div class=\" clearfix bot-body2\">' +\n            utterance +\n            '</p><span class=\"glyphicon glyphicon-time spanuser-text\">' +\n            asr_corrected_text +\n            \"</span>\" +\n            '<span class=\" clearfix\"><small class=\"left dt-text\"><span class=\"glyphicon glyphicon-time\"></span>' +\n            twelevehour_msgdtm +\n            \"&nbsp;&nbsp;</small></span></div><p>\" +\n            \"<p id='intent_id'>\" +\n            \"{ intent: '\" +\n            nlu_intent +\n            \"' }\" +\n            \"</p>\" +\n            \"</li>\";\n        } else {\n          x +=\n            '<li class=\"admin clearfix\" style=\"width:80%\"><span class=\"chat-img right clearfix\"><img src=\"http://placehold.it/50/FA6F57/fff&text=U\" alt=\"U\" class=\"img-circle\"/></span><div class=\" clearfix bot-body2\">' +\n            utterance +\n            \"</span>\" +\n            '<span class=\" clearfix\"><small class=\"left dt-text\"><span class=\"glyphicon glyphicon-time\"></span>' +\n            twelevehour_msgdtm +\n            \"&nbsp;&nbsp;</small></span></div><p>\" +\n            \"<p id='intent_id'>\" +\n            \"{ intent: '\" +\n            nlu_intent +\n            \"' }\" +\n            \"</p>\" +\n            \"</li>\";\n        }\n      }\n    }\n\n    document.getElementById(\"convdiv\").innerHTML = x + \"</ul>\";\n    document.getElementById(\"callerid_chatdiv\").innerHTML = callerid;\n\n    // updating conversation chatdiv line no. - 304 (sandeep)\n    document.getElementById(\"converseid_chatdiv\").innerHTML = convid;\n\n    document.getElementById(\"div_centernm\").innerHTML = centernm;\n\n    document.getElementById(\"conversionid_textbox\").value = convid;\n\n    this.setState({\n      ...this.state,\n      conversationID: convid,\n      showAudio: true,\n    });\n  }\n\n  noConvData() {\n    var x = \"<ul class='chat'>\";\n\n    document.getElementById(\"convdiv\").innerHTML =\n      \"No Convesation Data Found\" + \"</ul>\";\n  }\n\n  getEarlierDateBeforeToday = (todayDate, number) => {\n    var fromDate = todayDate;\n    let updatedEarlierDate = fromDate.setDate(fromDate.getDate() - number);\n    return updatedEarlierDate;\n  };\n\n  getCallerid = async (fromDate, toDate, callStatus, callerId) => {\n    const token = await this.GetAuthToken();\n    var myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"Accept\", \"application/json\");\n    myHeaders.append(\"Authorization\", `Bearer ${token}`);\n\n    var raw;\n    if (fromDate != \"\" && toDate != \"\") {\n      raw = JSON.stringify({\n        start_date: fromDate,\n        end_date: toDate,\n      });\n    } else if (fromDate != \"\" && toDate != \"\" && callerId != \"\") {\n      raw = JSON.stringify({\n        start_date: fromDate,\n        end_date: toDate,\n        caller_id: callerId,\n      });\n    } else if (callerId != \"\" && callStatus != \"\") {\n      raw = JSON.stringify({\n        status: callStatus,\n        caller_id: callerId,\n      });\n    } else if ((fromDate != \"\", toDate != \"\", callStatus != \"\")) {\n      raw = JSON.stringify({\n        start_date: fromDate,\n        end_date: toDate,\n        status: callStatus,\n      });\n    } else if (callerId != \"\") {\n      raw = JSON.stringify({\n        caller_id: callerId,\n      });\n    } else if (callStatus != \"\") {\n      raw = JSON.stringify({\n        status: callStatus,\n      });\n    } else {\n      raw = JSON.stringify({\n        start_date: fromDate,\n        end_date: toDate,\n        status: callStatus,\n        caller_id: callerId,\n      });\n    }\n\n    var requestOptions = {\n      method: \"POST\",\n\n      headers: myHeaders,\n      body: raw,\n      redirect: \"follow\",\n    };\n\n    fetch(\n      `${process.env.REACT_APP_API_URL}/oi/api/v1/all-calls`,\n      requestOptions\n    )\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(\"search DATA\", data);\n        this.setState({\n          ...this.state,\n          All_calls: data,\n          Loading: false,\n        });\n      })\n      .catch((error) => console.log(\"error\", error));\n  };\n\n  dateToStringFunc = (givenDate) => {\n    var today = givenDate;\n    var dd = String(today.getDate()).padStart(2, \"0\");\n    var mm = String(today.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n    var yyyy = today.getFullYear();\n\n    today = yyyy + \"/\" + mm + \"/\" + dd;\n    return today;\n  };\n\n  getAllCallerid = async () => {\n    const token = await this.GetAuthToken();\n\n    var myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"Accept\", \"application/json\");\n    myHeaders.append(\"Authorization\", `Bearer ${token}`);\n\n    let toDateString = this.dateToStringFunc(new Date());\n    var fromDate = new Date();\n    fromDate.setDate(fromDate.getDate() - 3);\n\n    let fromDateString = this.dateToStringFunc(fromDate);\n    console.log(\"Today\", toDateString);\n    console.log(\"Earlier\", fromDateString);\n    var raw = JSON.stringify({\n      start_date: fromDateString,\n      end_date: toDateString,\n      status: \"\",\n    });\n\n    var requestOptions = {\n      method: \"POST\",\n      headers: myHeaders,\n      body: raw,\n      redirect: \"follow\",\n    };\n\n    fetch(\n      `${process.env.REACT_APP_API_URL}/oi/api/v1/all-calls`,\n      requestOptions\n    )\n      .then((response) => response.json())\n      .then((data) => {\n        this.setState({\n          ...this.state,\n          All_calls: data,\n          Loading: false,\n        });\n      })\n      .catch((error) => console.log(\"error\", error));\n  };\n\n  componentDidMount() {\n    this.getAllCallerid();\n  }\n\n  InputHandler = (e) => {\n    this.setState({\n      ...this.state,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  render() {\n    let src = `${process.env.REACT_APP_API_URL}/oi/api/twilio/audio/${this.state.conversationID}`;\n\n    console.log(\"from\", this.state.fromDate);\n    console.log(\"to\", this.state.toDate);\n    console.log(\"status\", this.state.callStatus);\n\n    const ResetHandler = () => {\n      this.setState({\n        ...this.state,\n        fromDate: \"\",\n        toDate: \"\",\n        callStatus: \"\",\n        FilterCallRecord: \"\",\n        Search: false,\n        Contact: \"\",\n        ResetCheck: \"true\",\n      });\n      this.getAllCallerid();\n    };\n\n    let showcallRecords = null;\n\n    if (this.state.Loading) {\n      showcallRecords = (\n        <div\n          class=\"text-center\"\n          style={{\n            marginTop: \"45vh\",\n          }}\n        >\n          <LoaderThreeDot />\n        </div>\n      );\n    } else {\n      showcallRecords = (\n        <ul\n          class=\"nav nav-pills nav-pills-warning nav-stacked flex-column\"\n          style={{ flex: 1, scrollSnapType: \"y mandatory\" }}\n          role=\"tablist\"\n        >\n          {this.state.All_calls.map((k) => (\n            <li class=\"nav-item \" style={{ scrollSnapAlign: \"start\" }}>\n              <a\n                onClick={() =>\n                  this.getConvdata(\n                    k.conversation_id,\n                    k.center_name,\n                    k.caller_id\n                  )\n                }\n                class=\"nav-link \"\n                data-toggle=\"pill\"\n                href=\"#\"\n              >\n                <table\n                  class=\"\"\n                  style={{\n                    fontSize: \"10px\",\n                    color: \"white\",\n                    textAlign: \"left\",\n                    letterSpacing: \"1px\",\n                    marginBottom: \"3px\",\n                    lineHeight: \"1.2\",\n                    color: \"black\",\n                  }}\n                >\n                  <tr>\n                    <td\n                      style={{\n                        width: \"15%\",\n                        paddingTop: \"10px\",\n                        paddingTop: \"10px\",\n                      }}\n                    >\n                      <span id=\"newcall\"></span>\n                    </td>\n                    <td\n                      style={{\n                        textAlign: \"left\",\n                        paddingLeft: \"10px\",\n                        paddingBottom: \"3px\",\n                      }}\n                    >\n                      <span\n                        style={{\n                          fontWeight: \"800\",\n                          paddingBottom: \"2px\",\n                          paddingRight: \"5px\",\n                        }}\n                      >\n                        {k.caller_id}\n                      </span>\n                      <br />\n                      <span\n                        style={{\n                          paddingBottom: \"2px\",\n                        }}\n                      >\n                        {k.center_name}\n                      </span>\n                      <br />\n                      <span>\n                        {new Date(k.initiate_time).toLocaleString(\"en-US\", {\n                          year: \"numeric\",\n                          month: \"short\",\n                          day: \"numeric\",\n                          hour: \"numeric\",\n                          minute: \"numeric\",\n                          second: \"numeric\",\n                        })}\n                      </span>\n                    </td>\n                  </tr>\n                </table>\n              </a>\n            </li>\n          ))}\n        </ul>\n      );\n    }\n\n    return (\n      <div class=\"content-wrapper content-margin\">\n        <div class=\"container-fluid\">\n          {/*--<div id=\"root\"></div>--*/}\n          {/* search Menu bar */}\n\n          <div\n            class=\"border\"\n            style={{ backgroundColor: \"#DADCD4\", paddingLeft: \"10px\" }}\n          >\n            <div\n              class=\"d-flex searchmenu mr-5 \"\n              style={{ alignItems: \"center\" }}\n            >\n              <div class=\"search\" style={{ marginRight: \"5px\" }}>\n                <label style={{ marginRight: \"5px\" }}>FROM</label>\n\n                <input\n                  type=\"date\"\n                  class=\"input rounded\"\n                  style={{ borderWidth: \"thin\", padding: \"2px 0 2px 0\" }}\n                  name=\"fromDate\"\n                  value={this.state.fromDate}\n                  onChange={this.InputHandler}\n                />\n              </div>\n              <div class=\"search\" style={{ marginRight: \"5px\" }}>\n                <label style={{ marginRight: \"5px\" }}>TO</label>\n\n                <input\n                  type=\"date\"\n                  class=\"input rounded\"\n                  style={{ borderWidth: \"thin\", padding: \"2px 0 2px 0\" }}\n                  name=\"toDate\"\n                  value={this.state.toDate}\n                  onChange={this.InputHandler}\n                />\n              </div>\n              <div class=\"search\" style={{ marginRight: \"5px\" }}>\n                <label style={{ marginRight: \"5px\" }}>Contact</label>\n\n                <input\n                  type=\"text\"\n                  class=\"input rounded\"\n                  style={{ borderWidth: \"thin\", padding: \"2px 0 2px 0\" }}\n                  name=\"Contact\"\n                  value={this.state.Contact}\n                  onChange={this.InputHandler}\n                />\n              </div>\n              <div class=\"search\" style={{ marginRight: \"5px\" }}>\n                <label style={{ marginRight: \"5px\" }}>CALL STATUS</label>\n\n                <select\n                  id=\"callstatusselect\"\n                  class=\"input rounded\"\n                  style={{ padding: \"3px 0 3px 0\", height: \"32.8px\" }}\n                  value={this.state.callStatus}\n                  name=\"callStatus\"\n                  onChange={this.InputHandler}\n                >\n                  <option value=\"\">Select</option>\n                  <option value=\"AI_SUCCESS\">AI Success</option>\n                  <option value=\"OPERATOR_SUCCESS\">Operator Success</option>\n                  <option value=\"CUSTOMER_NO_RESPONSE\">\n                    Customer No Response\n                  </option>\n                  <option value=\"CUSTOMER_DISCONNECTED\">\n                    Customer Disconnected\n                  </option>\n                  <option value=\"CUSTOMER_CALLBACK\">Customer Callback</option>\n                  <option value=\"PROCEDURE_QUERY\">Procedure Query</option>\n                  <option value=\"GENERAL_QUERY\">General Query</option>\n                  <option value=\"APPOINTMENT_CONFIRMATION\">\n                    Appointment Confirmation\n                  </option>\n                </select>\n              </div>\n              <button\n                class=\"btn btn-success btn-round\"\n                style={{ marginRight: \"5px\", padding: \"7px\" }}\n                onClick={() =>\n                  this.getCallerid(\n                    this.state.fromDate,\n                    this.state.toDate,\n                    this.state.callStatus,\n                    this.state.Contact\n                  )\n                }\n              >\n                Search\n              </button>\n\n              <button\n                class=\"btn btn-warning btn-round\"\n                style={{\n                  marginRight: \"5px\",\n                  padding: \"7px\",\n                  paddingLeft: \"15px\",\n                  paddingRight: \"15px\",\n                }}\n                onClick={ResetHandler}\n              >\n                Reset\n              </button>\n            </div>\n          </div>\n\n          {/* search menubar end */}\n\n          <div class=\"content-wrapper content-margin\">\n            <div class=\"container-fluid\">\n              <div class=\"row\">\n                <div\n                  id=\"callrec\"\n                  class=\"col-md-2 call_divscrl\"\n                  style={{\n                    height: \"90vh\",\n                    padding: \"0px\",\n                    // display: \"flex\",\n                    // width: \"220px\",\n                  }}\n                >\n                  <div>{showcallRecords}</div>\n                </div>\n\n                <div\n                  // class=\"col-md-7 tab-content\"\n                  class=\"tab-content\"\n                  style={{\n                    height: \"100vh\",\n                    // backgroundColor: \"yellow\",\n                    // flex: \"1\",\n                    marginRight: \"21.5px\",\n                    width: \"56.5vw\",\n                    marginRight: \"3px\",\n                  }}\n                >\n                  <div id=\"item-01\" class=\"container-fluid tab-pane active\">\n                    <div\n                      class=\"card\"\n                      style={{\n                        flexDirection: \"column\",\n                        padding: \"0px 5px\",\n                      }}\n                    >\n                      {/* <div class=\"text-center\"> */}\n                      <div\n                        class=\"row\"\n                        style={{\n                          height: \"5vh\",\n                        }}\n                      >\n                        <div\n                          class=\"col-3 text-left\"\n                          id=\"callerid_chatdiv\"\n                        ></div>\n                        <div\n                          id=\"div_centernm\"\n                          class=\"col-4 text-center\"\n                          style={{ textTransform: \"capitalize\" }}\n                        >\n                          Conversation\n                        </div>\n                        <div\n                          class=\"col-5 text-right\"\n                          style={{\n                            fontWeight: \"normal\",\n                            fontSize: \"x-small\",\n                            fontStyle: \"italic\",\n                          }}\n                          id=\"converseid_chatdiv\"\n                        ></div>\n                      </div>\n\n                      <div class=\"row\">\n                        <div\n                          class=\"card-body chat-care chat-body scrollDisplay\"\n                          id=\"convdiv\"\n                          style={{\n                            flex: 1,\n                            height: \"79vh\",\n                          }}\n                        >\n                          <h2\n                            class=\"col-md-12 col-lg-12 text-center\"\n                            style={{ marginTop: \"45vh\", color: \"grey\" }}\n                          >\n                            Please select a conversation\n                          </h2>\n                        </div>\n                      </div>\n                      {/* chat card footer  */}\n                      <div class=\"row\">\n                        <div\n                          class=\" text-center col-md-12 col-lg-12\"\n                          style={{\n                            height: \"6vh\",\n                          }}\n                        >\n                          {this.state.showAudio && this.state.conversationID ? (\n                            <Audio src={src} />\n                          ) : null}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* ORDER DETAILS  */}\n                {/*--Order Detail Start--*/}\n                <div\n                  // class=\" col-md-3\"\n                  style={{\n                    height: \"90vh\",\n\n                    width: \"25%\",\n                  }}\n                >\n                  <div class=\"col-lg-12 col-md-12\" id=\"orderdetail_div\">\n                    <CallHistoryOrderForm\n                      convid={this.state.conversationID}\n                      getTokenFunc={this.GetAuthToken}\n                      ResetCheck={this.state.ResetCheck}\n                      state={this.state}\n                      setState={this.setState()}\n                    />\n                  </div>\n                </div>\n                {/*Order Detail End*/}\n              </div>\n            </div>\n            <input\n              type=\"hidden\"\n              name=\"conversionid_textbox\"\n              id=\"conversionid_textbox\"\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withAuth0(Callhistory);\n"]},"metadata":{},"sourceType":"module"}